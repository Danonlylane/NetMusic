# Reactç½‘æ˜“äº‘éŸ³ä¹é¡¹ç›®å¼€å‘æ–‡æ¡£

[toc]

### åœ¨çº¿é¢„è§ˆåœ°å€

- ğŸ˜‹ é¡¹ç›®åœ¨çº¿é¢„è§ˆåœ°å€ï¼šhttp://beiyep.cn:7878/

### æŠ€æœ¯æ ˆ

- `CSS` ä½¿ç”¨ `Flex` è¿›è¡Œå¸ƒå±€
- é…ç½®è·¯å¾„åˆ«åä½¿ç”¨ `carco`
- é¡¹ç›®è·¯ç”±ä½¿ç”¨ `react-router` æ¥ç®¡ç†
- ä½¿ç”¨ `react-router-config` é›†ä¸­å¼è·¯å¾„æ˜ å°„è¡¨ç®¡ç†
- ä½¿ç”¨ `styled-components` + æ™®é€šçš„ `css` ç¼–å†™æ ·å¼
- ä½¿ç”¨ `axios` å‘é€ç½‘ç»œè¯·æ±‚
- é¡¹ç›®å…¨é¢æ‹¥æŠ± `React Hooks`
- é¡¹ç›®ç»„ä»¶åº“ä½¿ç”¨ `ant design`
- ä½¿ç”¨ `immutable` å¯¹é¡¹ç›® `reducer` ä¸­ `state` è¿›è¡Œç®¡ç†
- ä½¿ç”¨ `redux-immtable`  å¯¹æ ¹ç›®å½• `reducer` ä¸­ `state` è¿›è¡Œç®¡ç†
- é¡¹ç›®ä½¿ç”¨ `redux-thunk` ä¸­é—´ä»¶
- ä½¿ç”¨ `propType` æ ¡éªŒ `props` ç±»å‹åŠé»˜è®¤å€¼
- ä½¿ç”¨ `react-transition-group` æ·»åŠ è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ
- é¡¹ç›®ä¸­çš„ä¼˜åŒ–: å‡½æ•°å¼ç»„ä»¶å…¨éƒ¨é‡‡ç”¨ `memo`ã€è·¯ç”±æ‡’åŠ è½½ã€å‡½æ•°é˜²æŠ–



### é¡¹ç›®è§„èŒƒ

é¡¹ç›®è§„èŒƒï¼šé¡¹ç›®ä¸­æœ‰ä¸€äº›å¼€å‘è§„èŒƒå’Œä»£ç é£æ ¼ (ä¹Ÿå¯ä»¥æŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯)

- æ–‡ä»¶å¤¹ã€æ–‡ä»¶åç§°ç»Ÿä¸€å°å†™ã€å¤šä¸ªå•è¯ä»¥è¿æ¥ç¬¦ï¼ˆ`-`ï¼‰è¿æ¥ï¼›

- `JavaScript`å˜é‡åç§°é‡‡ç”¨å°é©¼å³°æ ‡è¯†ï¼Œå¸¸é‡å…¨éƒ¨ä½¿ç”¨å¤§å†™å­—æ¯ï¼Œç»„ä»¶é‡‡ç”¨å¤§é©¼å³°ï¼›

- CSSé‡‡ç”¨æ™®é€š`CSS`å’Œ`styled-component`ç»“åˆæ¥ç¼–å†™

- å…¨å±€é‡‡ç”¨æ™®é€š`CSS`ã€å±€éƒ¨é‡‡ç”¨`styled-component`

- æ•´ä¸ªé¡¹ç›®ä¸å†ä½¿ç”¨`class`ç»„ä»¶ï¼Œç»Ÿä¸€ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œå¹¶ä¸”å…¨é¢æ‹¥æŠ±`Hooks`ï¼›

- æ‰€æœ‰çš„å‡½æ•°å¼ç»„ä»¶ï¼Œä¸ºäº†é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œå…¨éƒ¨ä½¿ç”¨`memo`è¿›è¡ŒåŒ…è£¹ï¼›

- ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ï¼Œä½¿ç”¨`useState`ã€`useReducer`ï¼›ä¸šåŠ¡æ•°æ®å…¨éƒ¨æ”¾åœ¨`redux`ä¸­ç®¡ç†ï¼›

- å‡½æ•°ç»„ä»¶å†…éƒ¨åŸºæœ¬æŒ‰ç…§å¦‚ä¸‹é¡ºåºç¼–å†™ä»£ç ï¼š
  - ç»„ä»¶å†…éƒ¨`state`ç®¡ç†ï¼›
  - `redux`çš„`hooks`ä»£ç ï¼›
  - å…¶ä»–ç»„ä»¶`hooks`ä»£ç ï¼›
  - å…¶ä»–é€»è¾‘ä»£ç ï¼›
  - è¿”å›JSXä»£ç ï¼›

- `redux`ä»£ç è§„èŒƒå¦‚ä¸‹:
  - æ¯ä¸ªæ¨¡å—æœ‰è‡ªå·±ç‹¬ç«‹çš„`reducer`ï¼Œé€šè¿‡`combineReducer`è¿›è¡Œåˆå¹¶ï¼›
  - å¼‚æ­¥è¯·æ±‚ä»£ç ä½¿ç”¨`redux-thunk`ï¼Œå¹¶ä¸”å†™åœ¨`actionCreators`ä¸­ï¼›
  - `redux`ç›´æ¥é‡‡ç”¨`redux hooks`æ–¹å¼ç¼–å†™ï¼Œä¸å†ä½¿ç”¨`connect`ï¼›

### é…ç½®åˆ«å

1. å®‰è£…ç¬¬ä¸‰æ–¹åº“ `yarn add @craco/craco`

   - ä½œç”¨ï¼šä¸æš´éœ² `webpack` åŸæœ¬é…ç½®çš„æƒ…å†µä¸‹ï¼Œç»™é¡¹ç›®æ·»åŠ  `webpack` é…ç½®

2. æŠŠ `package.json` é‡Œé¢çš„ `scripts` ç‰‡æ®µ

   ```json
    "scripts": {
       "start": "react-scripts start",
       "build": "react-scripts build",
       "test": "react-scripts test",
       "eject": "react-scripts eject"
     },
   ```

   ä¿®æ”¹ä¸º

   ```json
   "scripts": {
       "start": "craco start",
       "build": "craco build",
       "test": "craco test",
       "eject": "craco eject"
     },
   ```

3. åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º `craco.config.js` æ–‡ä»¶

   ```javascript
   const path = require("path");
   
   const resolve = dir => path.resolve(__dirname, dir);
   
   module.exports = {
       webpack: {
           alias: {
               "@": resolve("src"),
               "component": resolve("src/components")
           }
       }
   }
   ```

4. é‡å¯é¡¹ç›®ï¼Œåœ¨è·¯å¾„ä¸­ä½¿ç”¨åˆ«åå³å¯ã€‚




### ç”Ÿæˆç›®å½•ç»“æ„

åˆ©ç”¨ `tree` è¿™ä¸ªç›®å½•æ ‘ç”Ÿæˆå·¥å…·ã€‚`win` åŸç”Ÿæ”¯æŒ
`mac` ä¸‹éœ€è¦æ‰‹åŠ¨å®‰è£…

```mipsasm
brew install tree 
```

`tree` çš„å‡ ä¸ªå¸¸ç”¨å‘½ä»¤

```sh
tree -d åªæ˜¾ç¤ºæ–‡ä»¶å¤¹ï¼› 
tree -L n æ˜¾ç¤ºé¡¹ç›®çš„å±‚çº§ã€‚nè¡¨ç¤ºå±‚çº§æ•°ã€‚
tree -I pattern ç”¨äºè¿‡æ»¤ä¸æƒ³è¦æ˜¾ç¤ºçš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ã€‚
æ¯”å¦‚ä½ æƒ³è¦è¿‡æ»¤é¡¹ç›®ä¸­çš„node_modulesæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ä½¿ç”¨tree -I "node_modules"ï¼› 
tree > tree.md å°†é¡¹ç›®ç»“æ„è¾“å‡ºåˆ°tree.mdè¿™ä¸ªæ–‡ä»¶ã€‚
```

æœ¬é¡¹ç›®ç»“æ„å¿½ç•¥æ‰è¿™äº›å†…å®¹

`-I` å‘½ä»¤å…è®¸ä½ ä½¿ç”¨æ­£åˆ™åŒ¹é…æ¥æ’é™¤æ‰ä½ ä¸æƒ³çœ‹åˆ°çš„**æ–‡ä»¶å¤¹**ï¼Œä¾‹å¦‚ï¼š

```shell
tree -I "node_modules"
```

ä¹Ÿå¯ä»¥ä½¿ç”¨`|`åŒæ—¶æ’é™¤æ‰å¤šä¸ªæ–‡ä»¶å¤¹ï¼š

```
tree -I "node_modules|build"
```

æ›´å¤šå‘½ä»¤çš„ä½¿ç”¨å¯ä»¥æŸ¥çœ‹tree --help

**æœ¬é¡¹ç›®ç›®å½•ç»“æ„ï¼š**

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ craco.config.js
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚Â Â  â””â”€â”€ index.html
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ App.js
â”‚Â Â  â”œâ”€â”€ assets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ font
â”‚Â Â  â”‚Â Â  â””â”€â”€ img
â”‚Â Â  â”œâ”€â”€ common
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ constants.js
â”‚Â Â  â”‚Â Â  â””â”€â”€ local-data.js
â”‚Â Â  â”œâ”€â”€ components
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ album-cover
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app-footer
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app-header
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ songs-cover
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ theme-header-rcm
â”‚Â Â  â”‚Â Â  â””â”€â”€ top-ranking
â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ pages
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ discover
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ friend
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mine
â”‚Â Â  â”‚Â Â  â””â”€â”€ player
â”‚Â Â  â”œâ”€â”€ router
â”‚Â Â  â”‚Â Â  â””â”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ player.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ recommend.js
â”‚Â Â  â”‚Â Â  â””â”€â”€ request.js
â”‚Â Â  â”œâ”€â”€ store
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â”‚Â Â  â””â”€â”€ reducer.js
â”‚Â Â  â””â”€â”€ utils
â”‚Â Â      â”œâ”€â”€ format-utils.js
â”‚Â Â      â”œâ”€â”€ math-utils.js
â”‚Â Â      â””â”€â”€ parse-lyric.js
â”œâ”€â”€ yarn-error.log
â””â”€â”€ yarn.lock
```



### Redux å¼•å…¥é¡¹ç›®

æ ¹ç›®å½•ä¸‹çš„æ•´ä¸ªé¡¹ç›®çš„ store æ–‡ä»¶ï¼Œä½œç”¨æ˜¯å°†æ‰€æœ‰æ¨¡å—çš„ store æ–‡ä»¶è¿æ¥èµ·æ¥

>  src/store/index.js

```javascript
import { createStore, applyMiddleware, compose } from 'redux';
import thunk from 'redux-thunk';
import reducer from './reducer';

const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;

const store = createStore(reducer, composeEnhancers(
  applyMiddleware(thunk)
));

export default store;
```

> netmusic-react/src/store/reducer.js

```javascript
import { combineReducers } from 'redux-immutable';

import { reducer as recommendReducer } from '../pages/discover/c-pages/recommend/store';
import { reducer as playerReducer } from '../pages/player/store';
import { reducer as rankingReducer } from '../pages/discover/c-pages/ranking/store';
import { reducer as songsReducer } from "../pages/discover/c-pages/songs/store";

import { reducer as djradioReducer } from "../pages/discover/c-pages/djradio/store";
import { reducer as artistReducer } from "../pages/discover/c-pages/artist/store";
import { reducer as albumReducer } from "../pages/discover/c-pages/album/store";


import { reducer as themeHeaderReducer } from '../components/app-header/store';
import { reducer as searchReducer } from '../pages/search/store'



const cReducer = combineReducers({
  recommend: recommendReducer,
  player: playerReducer,
  ranking: rankingReducer,
  songs: songsReducer,
  djradio: djradioReducer,
  artist: artistReducer,
  album: albumReducer,
  search: searchReducer,
  themeHeader: themeHeaderReducer,

});

export default cReducer;
```

ä½¿ç”¨ react-redux ä¸­æä¾›çš„ Provider ç»„ä»¶ï¼Œå°†æ•´ä½“çš„ store å¼•å…¥æ ¹ç»„ä»¶

```javascript
// å¼•å…¥å¤–éƒ¨
import React, { memo, Suspense } from 'react';
import { renderRoutes } from 'react-router-config';

// å¼•å…¥åŠŸèƒ½æ€§
import routes from './router';
import store from './store'
import { Provider } from 'react-redux';

// è‡ªå®šä¹‰
import BeiAppHeader from '@/components/app-header';
import BeiAppFooter from '@/components/app-footer';
import { HashRouter } from 'react-router-dom';
import BeiAppPlayerBar from './pages/player/app-player-bar';

export default memo(function App() {
    return (
        <Provider store={store}>
            <HashRouter>
                <BeiAppHeader />
                <Suspense fallback={<div>page loading</div>}>
                    {renderRoutes(routes)}
                </Suspense>
                <BeiAppFooter />
                <BeiAppPlayerBar />
            </HashRouter>
        </Provider>
    )
});
```



### æ’­æ”¾æ åŠŸèƒ½çš„å®ç°

æ•´ä¸ªæ’­æ”¾æ æ˜¯ä¸€ä¸ªå¤§çš„ç»„ä»¶

![](https://tva1.sinaimg.cn/large/e6c9d24egy1h1mhzgwla0j21mk02yt98.jpg)

ç»“æ„å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š

ä»å·¦åˆ°å³åˆ†ä¸ºï¼šæ§åˆ¶æ­Œæ›²æ’­æ”¾ç»„ä»¶ã€æ­Œæ›²æ’­æ”¾ä¿¡æ¯ç»„ä»¶ã€å…¶ä»–æ§åˆ¶åŠŸèƒ½ç»„ä»¶

```html
<PlaybarWrapper className="sprite_player">
            <div className="content wrap-v2">
                </Control>
                <PlayInfo>
                </PlayInfo>
                <Operator sequence={sequence}>
                </Operator>
            </div>
            <audio
                id="audio"
                preload="auto"
                ref={audioRef}
                onTimeUpdate={e => timeUpdate(e)}
                onEnded={e => handleMusicEnded()} />
</PlaybarWrapper>
```

è·å–å½“å‰æ­Œæ›²

```javascript
// é»˜è®¤æ­Œæ›²
useEffect(() => {
        dispatch(getSongDetailAction(167876));
}, [dispatch]);

// å¦‚æœå½“å‰æ­Œæ›²å‘ç”Ÿæ”¹å˜ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¯¹åº”çš„ audio ç»„ä»¶çš„ src ä¹Ÿå‘ç”Ÿæ”¹å˜
useEffect(() => {
        audioRef.current.src = getPlaySong(currentSong.id);
        audioRef.current.play().then(res => {
            setIsPlaying(true);
        }).catch(err => {
            setIsPlaying(false);
        });
}, [currentSong]);
```

æ’­æ”¾éŸ³ä¹åŠŸèƒ½ï¼š

```javascript
const playMusic = useCallback(() => {
        isPlaying ? audioRef.current.pause() : audioRef.current.play();
        setIsPlaying(!isPlaying);
}, [isPlaying]);
```

audio ç»„ä»¶çš„æ’­æ”¾æ—¶é—´æ”¹å˜

```javascript
const timeUpdate = (e) => {
        const currentTime = e.target.currentTime;
        if (!isChanging) {
            setCurrentTime(currentTime * 1000);
            setProgress(currentTime * 1000 / duration * 100);
        }
}
```

æ‹–åŠ¨æ»‘å—æ”¹å˜æ—¶é—´ï¼Œæ­Œæ›²çš„æ’­æ”¾æ—¶é—´ä¹Ÿéšä¹‹æ”¹å˜

```javascript
const sliderChange = useCallback((value) => {
        setIsChanging(true);
        const currentTime = value / 100 * duration;
        setCurrentTime(currentTime);
        setProgress(value);
    }, [duration]);

const sliderAfterChange = useCallback((value) => {
        const currentTime = value / 100 * duration;
        audioRef.current.currentTime = currentTime;
        setCurrentTime(currentTime);
        setIsChanging(false);

        if (!isPlaying) {
            playMusic();
        }
    }, [duration, isPlaying, playMusic]);
```

### æ­Œæ›²æ­Œè¯å±•ç¤ºåŠŸèƒ½çš„å®ç°



ä» redux ä¸­è·å–å½“å‰çš„æ­Œæ›²å’Œæ­Œè¯åˆ°å½“å‰ç»„ä»¶ï¼ˆæ­Œè¯åœ¨è·å–å½“å‰çš„æ­Œæ›²ä¿¡æ¯æ—¶ï¼Œå·²ç»ä¸‹è½½åˆ° redux é‡Œé¢äº†ï¼‰

> src/pages/player/app-player-bar/index.js

```javascript
// redux hook
    const {
        currentSong,
        lyricList,
        currentLyricIndex
    } = useSelector(state => ({
        currentSong: state.getIn(["player", "currentSong"]),
        lyricList: state.getIn(["player", "lyricList"]),
        currentLyricIndex: state.getIn(["player", "currentLyricIndex"])
    }), shallowEqual);
```

redux é‡Œé¢è·å–æ­Œè¯çš„ action

```javascript
export const getLyricAction = (id) => {
  return dispatch => {
    getLyric(id).then(res => {
      const lyric = res.lrc.lyric;
      const lyricList = parseLyric(lyric);
      dispatch(changLyricListAction(lyricList));
    })
  }
}
```

> src/services/player.js

```javascript
export function getLyric(id) {
    return request({
        url: "/lyric",
        params: {
            id
        }
    })
}
```

æ ¹æ®åå°è¿”å›çš„æ•°æ®ï¼Œå¯¹æ­Œè¯è¿›è¡Œè§£æ

> src/utils/parse-lyric.js

```javascript
const parseExp = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/;

export function parseLyric(lyricString) {
  const lineStrings = lyricString.split("\n");

  const lyrics = [];
  for (let line of lineStrings) {
    if (line) {
      const result = parseExp.exec(line);
      if (!result) continue;
      const time1 = result[1] * 60 * 1000;
      const time2 = result[2] * 1000;
      const time3 = result[3].length === 3? result[3]*1: result[3]*10;
      const time = time1 + time2 + time3;
      const content = line.replace(parseExp, "").trim();
      const lineObj = {time, content};
      lyrics.push(lineObj);
    }
  }
  return lyrics;
}
```

åˆ©ç”¨æ—¶é—´å’Œä¸‹æ ‡æ‰¾åˆ°å½“å‰æ—¶é—´å¯¹åº”çš„æ­Œè¯ï¼Œå°†æ­Œè¯æ”¾åœ¨ AntDesign çš„ message ç»„ä»¶ä¸Š

```javascript
 const timeUpdate = (e) => {
        const currentTime = e.target.currentTime;
        if (!isChanging) {
            setCurrentTime(currentTime * 1000);
            setProgress(currentTime * 1000 / duration * 100);
        }

        // è·å–å½“å‰çš„æ­Œè¯
        let i = 0;
        for (; i < lyricList.length; i++) {
            let lyricItem = lyricList[i];
            if (currentTime * 1000 < lyricItem.time) {
                break;
            }
        }

        if (currentLyricIndex !== i - 1) {
            dispatch(changeCurrentLyricIndexAction(i - 1));
            const content = lyricList[i - 1] && lyricList[i - 1].content
            message.open({
                key: "lyric",
                content: content,
                duration: 0,
                className: "lyric-class"
            })
        }
    }
```

### æœç´¢æ¡†çš„å®ç°

ä½¿ç”¨ AntD çš„ input ç»„ä»¶

```javascript
import { Input } from 'antd';
```

input ç»„ä»¶çš„è®¾ç½®

```javascript
<Input
            ref={inputRef}
            className="search "
            placeholder="éŸ³ä¹/æ­Œæ‰‹"
            size="large"
            prefix={<SearchOutlined />}
            onChange={(e) => setIsRedirect(false) || setValue(e.target.value)}
            onInput={({ target }) => changeInput(target)}
            onFocus={handleFocus}
            onPressEnter={(e) => handleEnter(e)}
            value={value}
            onKeyDown={watchKeyboard}
            suffix={icons}
        />
```

è¾“å…¥æ¡†å†…å®¹å˜åŒ–æ—¶çš„å›è°ƒï¼šä½¿ç”¨å—æ§ç»„ä»·æ‹¿åˆ°æœç´¢æ¡†é‡Œé¢è¾“å…¥çš„å†…å®¹ï¼Œç„¶åä½¿ç”¨é˜²æŠ–èŠ‚æµä¼˜åŒ–å‘èµ·è¯·æ±‚ã€‚

```javascript
// other function å¢å¼ºç‰ˆçš„é˜²æŠ–å‡½æ•°å¯¹æœç´¢æ¡†è¿›è¡Œä¼˜åŒ–
    const changeInput = ThrottleEnhanceDebounce((target) => {
        let value = target.value.trim();
        if (value.length < 1) return;
        // æ˜¾ç¤ºä¸‹æ‹‰æ¡†
        dispatch(changeFocusStateAction(true));
        // å‘é€ç½‘ç»œè¯·æ±‚
        dispatch(getSearchSongListAction(value));
    }, 500)
```

å¦‚æœèšç„¦åˆ°æœç´¢æ¡†ï¼šä¸‹æ‹‰æ¡†å°±æ˜¾ç¤º

```javascript
<div
	className="down-slider"
  style={{ display: focusState ? 'block' : 'none' }}
>
```

è·å–ç„¦ç‚¹

```javascript
const handleFocus = useCallback(() => {
        // å½“æ–‡æœ¬è·å–ç„¦ç‚¹æ—¶,æ–‡æœ¬è¢«é€‰ä¸­çŠ¶æ€
        inputRef.current.select();
        // æ›´æ”¹ä¸ºè·å–ç„¦ç‚¹çŠ¶æ€
        dispatch(changeFocusStateAction(true));
        // ä¿®æ”¹çŠ¶æ€é‡å®šå‘çŠ¶æ€
        setIsRedirect(false);
}, [dispatch]);
```

ç›‘æ§ç”¨æˆ·æ˜¯å¦æŒ‰: "ä¸Š"æˆ–"ä¸‹"é”®

```javascript
    const watchKeyboard = useCallback(
        (even) => {
            let activeNumber = recordActive;
            if (even.keyCode === 38) {
                activeNumber--;
                activeNumber =
                    activeNumber < 0 ? searchSongList?.length - 1 : activeNumber;
                setRecordActive(activeNumber);
            } else if (even.keyCode === 40) {
                activeNumber++;
                activeNumber =
                    activeNumber >= searchSongList?.length ? 0 : activeNumber;
                setRecordActive(activeNumber);
            }
        },
        [recordActive, setRecordActive, searchSongList]
    );
```

ç›‘å¬ enter é”®çŠ¶æ€ï¼šè·³è½¬åˆ°æœç´¢è¯¦æƒ…

```javascript
    const handleEnter = useCallback(
        (e) => {
            // è¯´æ˜å½“å‰å…‰æ ‡æœ‰â€é«˜äº®å½“å‰è¡Œâ€œ
            if (recordActive >= 0) {
                // ä¿å­˜value
                setValue(
                    searchSongList[recordActive].name +
                    '-' +
                    searchSongList[recordActive].artists[0].name
                );
            }
            dispatch(changeFocusStateAction(false));
            // åªè¦åœ¨æœç´¢æ¡†å›è½¦: éƒ½è¿›è¡Œè·³è½¬
            setIsRedirect(true);
        },
        [dispatch, recordActive, searchSongList]
    );
```

ä¸‹æ‹‰æ¡†çš„å®ç°ï¼šè‡ªå·±å°è£…çš„ hooks

```javascript
/**
 * è°ƒç”¨è¯¥hookæ³¨å†Œå…¨å±€é”®ç›˜äº‹ä»¶: ctrl+kå”¤é†’æœç´¢æ¡†  escå…³é—­ä¸‹æ‹‰æ¡†
 */
export function useGlobalKeyboardEvent() {
  const showDropBoxState = useChangeDropBoxState(true)
  const closeDropBoxState = useChangeDropBoxState(false)
  document.addEventListener('keydown', (e) => {
    if (e.ctrlKey && e.key === 'k') {
      // é˜»æ­¢é»˜è®¤äº‹ä»¶
      e.preventDefault()
      showDropBoxState()
    }
    if (e.key === 'Escape') {
      closeDropBoxState()
    }
  })
}
```



### æ”¶è·çš„å°æŠ€å·§

1. a æ ‡ç­¾çš„å†…å®¹ä»¥åŠ SEO ä¼˜åŒ–ï¼šåœ¨ a æ ‡ç­¾é‡Œé¢ï¼Œå¦‚æœå†™ä¸Šäº†æ–‡å­—å†…å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬åˆå¸Œæœ›è¿™ä¸ªæ ‡ç­¾æ˜¯ä¸€ä¸ª Logo å›¾ç‰‡çš„è¯ï¼Œé‚£ä¹ˆæ–‡å­—å†…å®¹å°±æ˜¯å¤šä½™çš„ï¼Œä½†æ˜¯ä¸ºäº†æœç´¢å¼•æ“èƒ½å¤Ÿçˆ¬å–åˆ°å…³é”®å­—ï¼Œæ‰€ä»¥æ–‡å­—å†…å®¹åˆæ˜¯å¿…é¡»çš„ï¼Œè¿™æ ·çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ css ä¸­çš„ `text-indent: -9999px;` æ¥å°†æ–‡å­—å†…å®¹æ”¾åˆ°å±å¹•å¤–é¢ã€‚

```html
 <a href="#/" className="logo sprite_01">ç½‘æ˜“äº‘éŸ³ä¹</a>
```



